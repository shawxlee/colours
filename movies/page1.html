<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
	<link rel="stylesheet" type="text/css" href="page1_light.css">

	<link rel="icon" type="image/x-icon" href="favicon.ico">
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

	<title>MR.S - 来自Shaw的电影推荐</title>
</head>
<body>
	<div id="app">
		<div class="container-fluid">
			<!-- Page 1：全部影片 -->
			<div id="all">
				<div class="headNavbar">
					<!-- 顶部导航栏1：标题、切换模式 -->
					<nav class="navbar navbar-expand-lg fixed-top border-bottom">
						<span class="navbar-brand mb-0 h5">全部影片</span>
						<ul class="nav nav-pills" id="modeSwitch">
							<li class="nav-item mx-1">
								<a class="nav-link rounded-sm px-2 active" data-toggle="pill" href="#detailMode">全览模式</a>
							</li>
							<li class="nav-item mx-1">
								<a class="nav-link rounded-sm px-2" data-toggle="pill" href="#seriesMode">系列模式</a>
							</li>
							<li class="nav-item mx-1">
								<a class="nav-link rounded-sm px-2" data-toggle="pill" href="#miniMode">极简模式</a>
							</li>
						</ul>
					</nav>				
					<!-- 顶部导航栏2：排序、过滤、搜索 -->
					<nav class="navbar navbar-expand-lg border-bottom">
						<button class="navbar-toggler" id="screenToggler" data-toggle="collapse" data-target="#screenCollapse" type="button">
							<i class="fas fa-bars"></i>
						</button>
						<button class="navbar-toggler invisible" data-toggle="collapse" type="button">
							<i class="fas fa-search"></i>
						</button>
						<form>
							<input class="form-control rounded-pill" id="searchInput" type="search" placeholder="输入片名进行搜索">
							<button class="navbar-toggler" id="searchButton" type="button"><i class="fas fa-search"></i></button>
						</form>
						<div class="collapse navbar-collapse py-4 px-2" id="screenCollapse">
							<div class="row no-gutters mb-3 px-1">
								<div class="col-4">
									<a class="btn btn-sm btn-outline-primary border-0" :class="{active: sortOrder == 1}" @click="sortOrder = 1">按年份排序 <i class="fas fa-sort"></i></a>
								</div>
								<div class="col-4">
									<a class="btn btn-sm btn-outline-primary border-0" :class="{active: sortOrder == 2}" @click="sortOrder = 2">按评分排序 <i class="fas fa-sort"></i></a>
								</div>
								<div class="col-4">
									<a class="btn btn-sm btn-outline-primary border-0" :class="{active: sortOrder == 3}" @click="sortOrder = 3">按更新排序 <i class="fas fa-sort"></i></a>
								</div>
							</div>
							<hr>
							<div class="row no-gutters">
								<div class="col-2 p-1" v-for="item in tags">
									<a class="btn btn-sm btn-outline-primary">{{ item.tag }}</a>
								</div>
							</div>
						</div>
					</nav>
				</div>

				<!-- 下拉更新状态栏 -->
				<div id="topDivider">
					<div id="isReloading">
						<hr>&nbsp;&nbsp; 正在更新 <i class="fas fa-sync-alt"></i> &nbsp;&nbsp;<hr>
					</div>
					<div id="reloadSuccess" class="d-none">
						<hr>&nbsp;&nbsp; 更新成功 <i class="fas fa-check-circle"></i> &nbsp;&nbsp;<hr>
					</div>
					<div id="notModified" class="d-none">
						<hr>&nbsp;&nbsp; 没有更新 <i class="fas fa-minus-circle"></i> &nbsp;&nbsp;<hr>
					</div>
					<div id="reloadError" class="d-none">
						<hr>&nbsp;&nbsp; 更新失败 <i class="fas fa-exclamation-circle"></i> &nbsp;&nbsp;<hr>
					</div>
				</div>

				<!-- 标签页：电影列表 -->
				<div class="tab-content">
					<!-- 全览模式 -->
					<div class="tab-pane active" id="detailMode">
						<div class="detailCard my-3 p-3" v-for="(item, index) in filterSort(films)" :key="item.id">
							<div class="row no-gutters mb-2">
								<div class="col-4 col-sm-3 pr-2">
									<div class="filmPoster">
										<a :href="item.doubanUrl" target="_blank"><img :src="item.posterUrl" width="100%" height="100%"></a>
										<div class="scoreShadow"></div>
										<p :style="{color: scoreColor(item)}">{{ item.score }}</p>
									</div>
								</div>
								<div class="col-8 col-sm-9">
									<div class="filmInfo">
										<h5>{{ item.translateName }}</h5><span> ({{ item.year }})</span>
										<p>{{ item.officialName }}</p>
										<br><br><br>
										<p>地区：{{ item.country }}</p>
										<p>类型：{{ item.type }}</p>
										<p>导演：{{ item.director }}</p>
										<p>主演：{{ item.star }}</p>
									</div>
								</div>
							</div>
							<div class="row no-gutters">
								<div class="col-9">
									<div class="filmComment">
										<i class="fas fa-comment-dots mx-2"></i>{{ item.comment }}
									</div>
								</div>
								<div class="col-3 pl-2">
									<a class="btn btn-outline-primary"><i class="fas fa-plus"></i> 想看</a>
								</div>
							</div>
						</div>
					</div>
					<!-- 系列模式 -->
					<div class="tab-pane fade" id="seriesMode">
						<div class="card seriesCard" v-for="(item, index) in filterSort(films)" :key="item.id">
							<div class="card-header">
								<h5 class="mb-0">
									<button class="btn" data-toggle="collapse" type="button">{{ item.translateName }} <small>({{ item.year }})</small></button>
								</h5>
							</div>
						</div>
					</div>
					<!-- 极简模式 -->
					<div class="tab-pane fade accordion" id="miniMode">
						<div class="card miniCard" v-for="(item, index) in filterSort(films)" :key="item.id">
							<div class="card-header" id="'miniToggler_' + item.id">
								<h5 class="mb-0">
									<button class="btn btn-link collapsed" data-toggle="collapse" data-target="'#miniCollapse_' + item.id" type="button">{{ item.translateName }} <small>({{ item.year }})</small></button>
								</h5>
							</div>
							<div class="collapse" id="'miniCollapse_' + item.id" data-parent="'#miniToggler_' + item.id">
								<div class="card-body">
									<h6>{{ item.officialName }}</h6>
									<p>地区：{{ item.country }}</p>
									<p>类型：{{ item.type }}</p>
									<p>导演：{{ item.director }}</p>
									<p>主演：{{ item.star }}</p>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- 底部分割线 -->
				<div id="bottomDivider">
					<hr>&nbsp;&nbsp; 已到底部 <i class="far fa-check-circle"></i> &nbsp;&nbsp;<hr>
				</div>

				<!-- 快捷按钮 -->
				<div id="toTop"><i class="fas fa-chevron-up"></i></div>
				<div id="toBottom"><i class="fas fa-chevron-down"></i></div>

				<!-- 加载时显示画面 -->
				<div id="loadingBg">
					<div id="loadingInfo">
						<img src="loading.gif" width="50%">
						<br><br>
						<span>正在加载……</span>
					</div>
					<div id="errorInfo" class="d-none">
						<img src="error.png" width="50%">
						<br><br>
						<span>加载失败！</span>
						<br><br>
						<button class="btn btn-outline-primary" id="loadAgain" type="button"><i class="fas fa-redo-alt"></i> 重新加载</button>
					</div>
				</div>
			</div>

			<!-- 底部全局导航 -->
			<div id="footer">
				<ul class="nav nav-justified fixed-bottom border-top">
					<li class="nav-item">
						<a class="nav-link" :class="{active: pageOrder == 1}" id="toAll" href="#all" @click="pageOrder = 1"><i class="far fa-list-alt" v-show="pageOrder != 1"></i><i class="fas fa-list-alt" v-show="pageOrder == 1"></i><br>全部</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" :class="{active: pageOrder == 2}" id="toToWatch" href="#toWatch" @click="pageOrder = 2"><i class="far fa-caret-square-right" v-show="pageOrder != 2"></i><i class="fas fa-caret-square-right" v-show="pageOrder == 2"></i><br>待看</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" :class="{active: pageOrder == 3}" id="toWatched" href="#watched" @click="pageOrder = 3"><i class="far fa-check-square" v-show="pageOrder != 3"></i><i class="fas fa-check-square" v-show="pageOrder == 3"></i><br>已看</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" :class="{active: pageOrder == 4}" id="settingToggler" href="#settingSidebar" @click="pageOrder = 4"><i class="far fa-square" v-show="pageOrder != 4"></i><i class="fas fa-square" v-show="pageOrder == 4"></i><i class="fas fa-cog" :class="{active: pageOrder == 4}"></i><br>设置</a>
					</li>
				</ul>
			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
	<script type="text/javascript" src="page1.js"></script>
</body>
</html>